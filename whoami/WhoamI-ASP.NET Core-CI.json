{"options":[{"enabled":true,"definition":{"id":"5d58cc01-7c75-450c-be18-a388ddb129ec"},"inputs":{"branchFilters":"[\"+refs/heads/*\"]","additionalFields":"{}"}},{"enabled":false,"definition":{"id":"a9db38f9-9fdc-478c-b0f9-464221e58316"},"inputs":{"workItemType":"609670","assignToRequestor":"true","additionalFields":"{}"}}],"triggers":[{"branchFilters":["+master"],"pathFilters":[],"batchChanges":false,"maxConcurrentBuildsPerBranch":1,"pollingInterval":0,"triggerType":2}],"variables":{"BuildConfiguration":{"value":"release","allowOverride":true},"BuildPlatform":{"value":"any cpu","allowOverride":true},"DOCKER_PASS":{"value":null,"isSecret":true},"DOCKER_USER":{"value":"artisticcheese"},"system.debug":{"value":"false","allowOverride":true}},"retentionRules":[{"branches":["+refs/heads/*"],"artifacts":[],"artifactTypesToDelete":["FilePath","SymbolStore"],"daysToKeep":10,"minimumToKeep":1,"deleteBuildRecord":true,"deleteTestResults":true}],"properties":{},"tags":[],"metrics":[{"name":"CurrentBuildsInQueue","scope":"refs/heads/master","intValue":0},{"name":"CurrentBuildsInProgress","scope":"refs/heads/master","intValue":0},{"name":"CanceledBuilds","scope":"refs/heads/master","intValue":0,"date":"2018-06-09T00:00:00.000Z"},{"name":"FailedBuilds","scope":"refs/heads/master","intValue":0,"date":"2018-06-09T00:00:00.000Z"},{"name":"PartiallySuccessfulBuilds","scope":"refs/heads/master","intValue":0,"date":"2018-06-09T00:00:00.000Z"},{"name":"SuccessfulBuilds","scope":"refs/heads/master","intValue":3,"date":"2018-06-09T00:00:00.000Z"},{"name":"TotalBuilds","scope":"refs/heads/master","intValue":3,"date":"2018-06-09T00:00:00.000Z"},{"name":"CanceledBuilds","scope":"refs/heads/master","intValue":2,"date":"2018-06-08T00:00:00.000Z"},{"name":"FailedBuilds","scope":"refs/heads/master","intValue":1,"date":"2018-06-08T00:00:00.000Z"},{"name":"PartiallySuccessfulBuilds","scope":"refs/heads/master","intValue":0,"date":"2018-06-08T00:00:00.000Z"},{"name":"SuccessfulBuilds","scope":"refs/heads/master","intValue":3,"date":"2018-06-08T00:00:00.000Z"},{"name":"TotalBuilds","scope":"refs/heads/master","intValue":6,"date":"2018-06-08T00:00:00.000Z"},{"name":"CanceledBuilds","scope":"refs/heads/master","intValue":0,"date":"2018-06-05T00:00:00.000Z"},{"name":"FailedBuilds","scope":"refs/heads/master","intValue":10,"date":"2018-06-05T00:00:00.000Z"},{"name":"PartiallySuccessfulBuilds","scope":"refs/heads/master","intValue":0,"date":"2018-06-05T00:00:00.000Z"},{"name":"SuccessfulBuilds","scope":"refs/heads/master","intValue":0,"date":"2018-06-05T00:00:00.000Z"},{"name":"TotalBuilds","scope":"refs/heads/master","intValue":10,"date":"2018-06-05T00:00:00.000Z"},{"name":"CanceledBuilds","scope":"refs/heads/master","intValue":1,"date":"2018-06-04T00:00:00.000Z"},{"name":"FailedBuilds","scope":"refs/heads/master","intValue":23,"date":"2018-06-04T00:00:00.000Z"},{"name":"PartiallySuccessfulBuilds","scope":"refs/heads/master","intValue":0,"date":"2018-06-04T00:00:00.000Z"},{"name":"SuccessfulBuilds","scope":"refs/heads/master","intValue":1,"date":"2018-06-04T00:00:00.000Z"},{"name":"TotalBuilds","scope":"refs/heads/master","intValue":25,"date":"2018-06-04T00:00:00.000Z"}],"_links":{"self":{"href":"https://artisticcheese.visualstudio.com/ca66d7ec-b3a1-485d-b49b-4f021fa03000/_apis/build/Definitions/3?revision=53"},"web":{"href":"https://artisticcheese.visualstudio.com/ca66d7ec-b3a1-485d-b49b-4f021fa03000/_build/definition?definitionId=3"},"editor":{"href":"https://artisticcheese.visualstudio.com/ca66d7ec-b3a1-485d-b49b-4f021fa03000/_build/designer?id=3&_a=edit-build-definition"},"badge":{"href":"https://artisticcheese.visualstudio.com/_apis/public/build/definitions/ca66d7ec-b3a1-485d-b49b-4f021fa03000/3/badge"}},"buildNumberFormat":"$(date:yyyyMMddss)","jobAuthorizationScope":1,"jobTimeoutInMinutes":60,"jobCancelTimeoutInMinutes":5,"badgeEnabled":true,"process":{"phases":[{"steps":[{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Build UNIX image","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"e28912f1-0114-4464-802a-a3a35437fd16","versionSpec":"0.*","definitionType":"task"},"inputs":{"containerregistrytype":"Container Registry","dockerRegistryEndpoint":"58a8af01-7827-4a9f-9f3d-6dc157954173","azureSubscriptionEndpoint":"","azureContainerRegistry":"","action":"Build an image","dockerFile":"whoami/Dockerfile","buildArguments":"","defaultContext":"true","context":"","imageName":"artisticcheese/whoami:unix-$(Build.BuildNumber)","imageNamesPath":"","qualifyImageName":"true","additionalImageTags":"","includeSourceTags":"false","includeLatestTag":"true","imageDigestFile":"","containerName":"","ports":"","volumes":"","envVars":"","workDir":"","entrypoint":"","containerCommand":"","detached":"true","restartPolicy":"no","restartMaxRetries":"","customCommand":"","dockerHostEndpoint":"","enforceDockerNamingConvention":"true","cwd":"$(System.DefaultWorkingDirectory)","memory":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Push UNIX server image copy","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"e28912f1-0114-4464-802a-a3a35437fd16","versionSpec":"0.*","definitionType":"task"},"inputs":{"containerregistrytype":"Container Registry","dockerRegistryEndpoint":"58a8af01-7827-4a9f-9f3d-6dc157954173","azureSubscriptionEndpoint":"","azureContainerRegistry":"","action":"Push an image","dockerFile":"**/Dockerfile","buildArguments":"","defaultContext":"true","context":"","imageName":"artisticcheese/whoami:unix-$(Build.BuildNumber)","imageNamesPath":"","qualifyImageName":"true","additionalImageTags":"","includeSourceTags":"true","includeLatestTag":"false","imageDigestFile":"","containerName":"","ports":"","volumes":"","envVars":"","workDir":"","entrypoint":"","containerCommand":"","detached":"true","restartPolicy":"no","restartMaxRetries":"","customCommand":"","dockerHostEndpoint":"","enforceDockerNamingConvention":"true","cwd":"$(System.DefaultWorkingDirectory)","memory":""}}],"name":"Run UNIX builds","refName":"Phase_2","condition":"succeeded()","target":{"queue":{"_links":{"self":{"href":"https://artisticcheese.visualstudio.com/_apis/build/Queues/18"}},"id":18,"url":"https://artisticcheese.visualstudio.com/_apis/build/Queues/18","pool":null},"executionOptions":{"type":0},"allowScriptsAuthAccessOption":false,"type":1},"jobAuthorizationScope":"projectCollection","jobCancelTimeoutInMinutes":1},{"steps":[{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Build Windows LTS nanoserver image","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"e28912f1-0114-4464-802a-a3a35437fd16","versionSpec":"0.*","definitionType":"task"},"inputs":{"containerregistrytype":"Container Registry","dockerRegistryEndpoint":"58a8af01-7827-4a9f-9f3d-6dc157954173","azureSubscriptionEndpoint":"","azureContainerRegistry":"","action":"Build an image","dockerFile":"whoami/Dockerfile","buildArguments":"","defaultContext":"true","context":"","imageName":"artisticcheese/whoami:nanoLTS-$(Build.BuildNumber)","imageNamesPath":"","qualifyImageName":"true","additionalImageTags":"","includeSourceTags":"false","includeLatestTag":"true","imageDigestFile":"","containerName":"","ports":"","volumes":"","envVars":"","workDir":"","entrypoint":"","containerCommand":"","detached":"true","restartPolicy":"no","restartMaxRetries":"","customCommand":"","dockerHostEndpoint":"","enforceDockerNamingConvention":"true","cwd":"$(System.DefaultWorkingDirectory)","memory":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Push LTS nano server image","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"e28912f1-0114-4464-802a-a3a35437fd16","versionSpec":"0.*","definitionType":"task"},"inputs":{"containerregistrytype":"Container Registry","dockerRegistryEndpoint":"58a8af01-7827-4a9f-9f3d-6dc157954173","azureSubscriptionEndpoint":"","azureContainerRegistry":"","action":"Push an image","dockerFile":"**/Dockerfile","buildArguments":"","defaultContext":"true","context":"","imageName":"artisticcheese/whoami:nanoLTS-$(Build.BuildNumber)","imageNamesPath":"","qualifyImageName":"true","additionalImageTags":"","includeSourceTags":"true","includeLatestTag":"false","imageDigestFile":"","containerName":"","ports":"","volumes":"","envVars":"","workDir":"","entrypoint":"","containerCommand":"","detached":"true","restartPolicy":"no","restartMaxRetries":"","customCommand":"","dockerHostEndpoint":"","enforceDockerNamingConvention":"true","cwd":"$(System.DefaultWorkingDirectory)","memory":""}},{"environment":{},"enabled":false,"continueOnError":false,"alwaysRun":false,"displayName":"Install rebase-docker-image package","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"fe47e961-9fa8-4106-8639-368c022d43ad","versionSpec":"1.*","definitionType":"task"},"inputs":{"command":"custom","workingDir":"","verbose":"true","customCommand":"install -g rebase-docker-image","customRegistry":"useNpmrc","customFeed":"","customEndpoint":"","publishRegistry":"useExternalRegistry","publishFeed":"","publishEndpoint":""}},{"environment":{},"enabled":false,"continueOnError":false,"alwaysRun":false,"displayName":"PowerShell Script","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"1.*","definitionType":"task"},"inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"Install rebase-docker-image package","workingFolder":"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n& $env:AppData\\npm\\rebase-docker-image.cmd --src \"artisticcheese/whoami:nanolts-$(Build.BuildNumber)\"  --target \"artisticcheese/whoami:nano1709-$(Build.BuildNumber)\"   --targetbase microsoft/nanoserver:1709","failOnStandardError":"true"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"RegEx Find & Replace","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"918b5374-31ca-4b2a-ac78-92ad468a840f","versionSpec":"3.*","definitionType":"task"},"inputs":{"InputSearchPattern":"whoami\\manifest.yml\n","FindRegex":"-2018060858","ReplaceRegex":"-$(Build.BuildNumber)","UseUTF8":"true"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Publish Artifact: artifact","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"2ff763a7-ce83-4e1f-bc89-0ae63477cebe","versionSpec":"1.*","definitionType":"task"},"inputs":{"PathtoPublish":"whoami/manifest.yml","ArtifactName":"artifact","ArtifactType":"Container","TargetPath":"","Parallel":"false","ParallelCount":"8"}}],"name":"Run Windows Builds","refName":"Phase_1","condition":"succeeded()","target":{"queue":{"_links":{"self":{"href":"https://artisticcheese.visualstudio.com/_apis/build/Queues/19"}},"id":19,"url":"https://artisticcheese.visualstudio.com/_apis/build/Queues/19","pool":null},"executionOptions":{"type":0},"allowScriptsAuthAccessOption":false,"type":1},"jobAuthorizationScope":"projectCollection","jobCancelTimeoutInMinutes":1}],"type":1},"repository":{"properties":{"apiUrl":"https://api.github.com/repos/artisticcheese/artisticcheesecontainer","branchesUrl":"https://api.github.com/repos/artisticcheese/artisticcheesecontainer/branches","cloneUrl":"https://github.com/artisticcheese/artisticcheesecontainer.git","fullName":"artisticcheese/artisticcheesecontainer","manageUrl":"https://github.com/artisticcheese/artisticcheesecontainer","refsUrl":"https://api.github.com/repos/artisticcheese/artisticcheesecontainer/git/refs","defaultBranch":"master","connectedServiceId":"76342a85-2b53-46fb-9f8f-63f0f8becb95","isPrivate":"False","checkoutNestedSubmodules":"false","cleanOptions":"0","fetchDepth":"0","gitLfsSupport":"false","reportBuildStatus":"true","skipSyncSource":"false","labelSourcesFormat":"$(build.buildNumber)","labelSources":"0"},"id":"artisticcheese/artisticcheesecontainer","type":"GitHub","name":"artisticcheese/artisticcheesecontainer","url":"https://github.com/artisticcheese/artisticcheesecontainer.git","defaultBranch":"master","clean":"false","checkoutSubmodules":false},"processParameters":{},"quality":1,"authoredBy":{"displayName":"Gregory Suvalian","url":"https://app.vssps.visualstudio.com/A60df6548-3e35-42d1-b5c6-90dd32eaceb9/_apis/Identities/a490c7b5-67b3-4253-9d5e-d3c368e34a34","_links":{"avatar":{"href":"https://artisticcheese.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.YzY5NTQzNmUtYWU1Zi03NzM0LWE4NGMtYjA0MzQ3OTBjMjYz"}},"id":"a490c7b5-67b3-4253-9d5e-d3c368e34a34","uniqueName":"artisticcheese@gmail.com","imageUrl":"https://artisticcheese.visualstudio.com/_api/_common/identityImage?id=a490c7b5-67b3-4253-9d5e-d3c368e34a34","descriptor":"aad.YzY5NTQzNmUtYWU1Zi03NzM0LWE4NGMtYjA0MzQ3OTBjMjYz"},"drafts":[],"queue":{"_links":{"self":{"href":"https://artisticcheese.visualstudio.com/_apis/build/Queues/19"}},"id":19,"name":"Hosted VS2017","url":"https://artisticcheese.visualstudio.com/_apis/build/Queues/19","pool":{"id":4,"name":"Hosted VS2017","isHosted":true}},"id":3,"name":"WhoamI-ASP.NET Core-CI","url":"https://artisticcheese.visualstudio.com/ca66d7ec-b3a1-485d-b49b-4f021fa03000/_apis/build/Definitions/3?revision=53","uri":"vstfs:///Build/Definition/3","path":"\\","type":2,"queueStatus":0,"revision":53,"createdDate":"2018-06-08T21:46:14.687Z","project":{"id":"ca66d7ec-b3a1-485d-b49b-4f021fa03000","name":"WhoamI","url":"https://artisticcheese.visualstudio.com/_apis/projects/ca66d7ec-b3a1-485d-b49b-4f021fa03000","state":"wellFormed","revision":411631424,"visibility":0}}